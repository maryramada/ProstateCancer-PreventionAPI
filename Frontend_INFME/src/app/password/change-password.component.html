<div class="change-password-page">
  <div class="page-title animate-fade-in">
    <div class="title-icon">
      <svg xmlns="http://www.w3.org/2000/svg" height="44" width="44" fill="#F26202" viewBox="0 0 24 24">
        <path d="M12 17c1.66 0 3-1.34 3-3V7a3 3 0 00-6 0v7c0 1.66 1.34 3 3 3z" />
        <path d="M6 10v7c0 3.31 2.69 6 6 6s6-2.69 6-6v-7H6z" opacity=".3" />
        <path
          d="M18 10v7c0 2.76-2.24 5-5 5s-5-2.24-5-5v-7H4v7c0 3.87 3.13 7 7 7s7-3.13 7-7v-7h-2zM12 7V5a3 3 0 00-3 3v7a3 3 0 006 0v-7h-3z" />
      </svg>
      <div class="title-text">
        <h1>Alterar Palavra-passe</h1>
        <p class="subtitle">Atualize a sua senha com segurança</p>
      </div>
    </div>
  </div>

  <!-- Formulário de Alteração -->
  <div class="change-password-container">
    <div class="change-password-card">
      <form (ngSubmit)="changePassword()" #changePasswordForm="ngForm">

        <!-- Mensagens de Erro ou Sucesso -->
        <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>
        <div *ngIf="successMessage" class="success">{{ successMessage }}</div>

        <!-- Email -->
        <div class="form-group">
          <label for="email">Email</label>
          <input id="email" type="email" name="email" [(ngModel)]="email" #emailInput="ngModel" required
            placeholder="exemplo@dominio.com" />
          <div *ngIf="emailInput.invalid && emailInput.touched && !submittedSuccessfully" class="input-error">
            Email é obrigatório e deve ser válido.
          </div>
        </div>

        <!-- Palavra-passe Atual -->
        <div class="form-group password-group">
          <label for="currentPassword">Palavra-passe Atual</label>
          <div class="input-wrapper">
            <input [type]="showCurrentPassword ? 'text' : 'password'" id="currentPassword" name="currentPassword"
              [(ngModel)]="currentPassword" #currentPasswordInput="ngModel" required placeholder="••••••••" />
            <button type="button" class="toggle-password" (click)="showCurrentPassword = !showCurrentPassword">
              <svg *ngIf="!showCurrentPassword" xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 24 24"
                fill="#333">
                <path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 110-10 5 5 0 010 10z" />
                <circle cx="12" cy="12" r="2.5" />
              </svg>
              <svg *ngIf="showCurrentPassword" xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 24 24"
                fill="#333">
                <path
                  d="M12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6S8.69 6 12 6m0-2C5 4 1 12 1 12s4 8 11 8 11-8 11-8-4-8-11-8z" />
              </svg>
            </button>
          </div>
          <div *ngIf="currentPasswordInput.invalid && currentPasswordInput.touched && !submittedSuccessfully"
            class="input-error">
            Palavra-passe atual é obrigatória.
          </div>
        </div>

        <!-- Nova Palavra-passe -->
        <div class="form-group password-group">
          <label for="newPassword">Nova Palavra-passe</label>
          <div class="input-wrapper">
            <input [type]="showNewPassword ? 'text' : 'password'" id="newPassword" name="newPassword"
              [(ngModel)]="newPassword" #newPasswordInput="ngModel" required minlength="6" placeholder="••••••••" />
            <button type="button" class="toggle-password" (click)="showNewPassword = !showNewPassword">
              <svg *ngIf="!showNewPassword" xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 24 24"
                fill="#333">
                <path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 110-10 5 5 0 010 10z" />
                <circle cx="12" cy="12" r="2.5" />
              </svg>
              <svg *ngIf="showNewPassword" xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 24 24"
                fill="#333">
                <path
                  d="M12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6S8.69 6 12 6m0-2C5 4 1 12 1 12s4 8 11 8 11-8 11-8-4-8-11-8z" />
              </svg>
            </button>
          </div>
          <div *ngIf="newPasswordInput.invalid && newPasswordInput.touched && !submittedSuccessfully"
            class="input-error">
            Nova palavra-passe é obrigatória e deve ter pelo menos 6 caracteres.
          </div>
        </div>

        <!-- Confirmar Nova Palavra-passe -->
        <div class="form-group password-group">
          <label for="confirmPassword">Confirmar Nova Palavra-passe</label>
          <div class="input-wrapper">
            <input [type]="showConfirmPassword ? 'text' : 'password'" id="confirmPassword" name="confirmPassword"
              [(ngModel)]="confirmPassword" #confirmPasswordInput="ngModel" required placeholder="••••••••" />
            <button type="button" class="toggle-password" (click)="showConfirmPassword = !showConfirmPassword">
              <svg *ngIf="!showConfirmPassword" xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 24 24"
                fill="#333">
                <path d="M12 5C5 5 1 12 1 12s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 110-10 5 5 0 010 10z" />
                <circle cx="12" cy="12" r="2.5" />
              </svg>
              <svg *ngIf="showConfirmPassword" xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 24 24"
                fill="#333">
                <path
                  d="M12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6S8.69 6 12 6m0-2C5 4 1 12 1 12s4 8 11 8 11-8 11-8-4-8-11-8z" />
              </svg>
            </button>
          </div>
          <div *ngIf="confirmPasswordInput.invalid && confirmPasswordInput.touched && !submittedSuccessfully"
            class="input-error">
            Confirmação da palavra-passe é obrigatória.
          </div>
        </div>

        <button type="submit" [disabled]="changePasswordForm.invalid" class="btn-change-pass-submit">
          Alterar Palavra-passe
        </button>
        <button type="button" class="btn-back" (click)="goBackToLogin()">
          ← Voltar
        </button>
      </form>
    </div>
  </div>
</div>